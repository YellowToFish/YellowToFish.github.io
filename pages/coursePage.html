<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@3.2.7/dist/vue.global.prod.js"></script>
    <link rel="stylesheet" href="../styles/coursePageStyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@200;400;600;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">
    <title>數位系考古題題庫</title>
</head>

<body>
    <div id="app">
        <header class="top-bar" id="top-bar">
        </header>
        <div class="course-title">
            <h2>{{ keyword.courseNameZh }}</h2>
        </div>
        <div class="course-years">
            <div>
                <table>
                    <thead>
                        <tr>
                            <td colspan="2">期中</td>
                        </tr>
                    </thead>
                    <tbody v-for="items in libraryMiddleUrl">
                        <tr>
                            <td>{{ items.fileYear }}</td>
                            <td>
                                <a v-for="(item, index) in items.fileMiddleUrl" :href=item
                                    target="_blank">{{ index + 1 }}</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <table>
                    <thead>
                        <tr>
                            <td colspan="2">期末</td>
                        </tr>
                    </thead>
                    <tbody v-for="items in libraryFinalUrl">
                        <tr>
                            <td>{{ items.fileYear }}</td>
                            <td>
                                <a v-for="(item, index) in items.fileFinalUrl" :href=item
                                    target="_blank">{{ index + 1 }}</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <footer class="bottom-bar">
            <div>
                <div>
                    <h3>相關單位</h3>
                    <span></span>
                    <a href="https://www.nutn.edu.tw/" target="_blank">南大首頁</a>
                    <a href="http://ilt.nutn.edu.tw/" target="_blank">數位系首頁</a>
                </div>
                <div>
                    <h3>實用連結</h3>
                    <span></span>
                    <a href="https://ecourse.nutn.edu.tw/" target="_blank">E-Course課程網站</a>
                    <a href="https://academics.nutn.edu.tw/SelSys/" target="_blank">南大選課系統</a>
                    <a href="https://academics.nutn.edu.tw/iSTU/" target="_blank">南大學生系統</a>
                </div>
                <div>
                    <h3>聯繫</h3>
                    <span></span>
                    <a>Discord：YellowToFish#5671</a>
                    <a>Gmail：s10855033@gm2.nutn.edu.tw</a>
                </div>
            </div>
            <div>Copyright © 2021 - 2023 YellowToFish</div>
        </footer>
    </div>
    <script type="module">
        Vue.createApp({
            data(){
                let obj = [{
    "courseNum": "1001",
    "courseNameZh": "微積分(一)",
    "courseMiddleExam": ["106.pdf", "107.pdf", "108.pdf"],
    "courseFinalExam": ["107.pdf", "108.pdf"]
}, {
    "courseNum": "1002",
    "courseNameZh": "程式設計",
    "courseMiddleExam": [],
    "courseFinalExam": []
}, {
    "courseNum": "1004",
    "courseNameZh": "計算機概論",
    "courseMiddleExam": ["107_1.jpg", "107_2.jpg"],
    "courseFinalExam": []
}, {
    "courseNum": "1007",
    "courseNameZh": "線性代數",
    "courseMiddleExam": [],
    "courseFinalExam": ["106.pdf"]
}, {
    "courseNum": "1008",
    "courseNameZh": "微積分(二)",
    "courseMiddleExam": ["107.pdf", "108.pdf"],
    "courseFinalExam": ["107.pdf", "108.pdf"]
}, {
    "courseNum": "1013",
    "courseNameZh": "資料結構",
    "courseMiddleExam": ["106_01.jpg", "106_02.jpg", "107_01.jpg", "107_02.jpg", "108_01.jpg", "108_02.jpg"],
    "courseFinalExam": ["105.pdf", "106.pdf", "107.pdf", "108_01.pdf", "108_02.pdf"]
}, {
    "courseNum": "1015",
    "courseNameZh": "離散數學",
    "courseMiddleExam": ["107.pdf"],
    "courseFinalExam": ["106_1.jpg", "106_2.jpg", "106_3.jpg", "107_1.jpg", "107_2.jpg", "107_3.jpg", "107_4.jpg", "107_5.jpg"]
}, {
    "courseNum": "1016",
    "courseNameZh": "系統分析與設計",
    "courseMiddleExam": ["105.pdf"],
    "courseFinalExam": []
}, {
    "courseNum": "1023",
    "courseNameZh": "機率與統計",
    "courseMiddleExam": ["107_01.jpg", "107_02.jpg", "108_01.jpg", "108_02.jpg", "109.pdf"],
    "courseFinalExam": ["107_01.jpg", "107_02.jpg", "107_03.jpg", "108_01.jpg", "108_02.jpg", "108_03.jpg"]
}, {
    "courseNum": "1026",
    "courseNameZh": "網路系統實務與管理",
    "courseMiddleExam": ["110.pdf"],
    "courseFinalExam": []
}, {
    "courseNum": "1027",
    "courseNameZh": "資訊倫理與法律",
    "courseMiddleExam": [],
    "courseFinalExam": ["109.pdf"]
}, {
    "courseNum": "1030",
    "courseNameZh": "電腦圖學",
    "courseMiddleExam": [],
    "courseFinalExam": ["105.pdf"]
}, {
    "courseNum": "1034",
    "courseNameZh": "演算法",
    "courseMiddleExam": ["107.pdf", "109_01.jpg", "109_02.jpg", "109_03.jpg", "109_04.jpg", "110.pdf"],
    "courseFinalExam": ["110.pdf"]
}, {
    "courseNum": "1040",
    "courseNameZh": "學習理論",
    "courseMiddleExam": ["105_01.pdf", "105_02.pdf"],
    "courseFinalExam": []
}, {
    "courseNum": "1041",
    "courseNameZh": "資料庫系統",
    "courseMiddleExam": ["107_01.jpg", "107_02.jpg", "108_01.JPG", "108_02.JPG", "109_01.jpg", "109_02.jpg", "110.pdf", "Note.pdf"],
    "courseFinalExam": ["109_01.jpg", "109_02.jpg", "110.pdf", "Note.pdf"]
}, {
    "courseNum": "1045",
    "courseNameZh": "人工智慧",
    "courseMiddleExam": ["100.pdf", "102.pdf", "104.pdf", "107.pdf", "108.pdf", "110.pdf"],
    "courseFinalExam": []
}, {
    "courseNum": "1047",
    "courseNameZh": "管理資訊系統",
    "courseMiddleExam": [],
    "courseFinalExam": []
}, {
    "courseNum": "1072",
    "courseNameZh": "程式設計實作",
    "courseMiddleExam": [],
    "courseFinalExam": []
}, {
    "courseNum": "1088",
    "courseNameZh": "認知科學",
    "courseMiddleExam": ["104_1.pdf", "104_2.pdf", "105_1.pdf", "105_2.pdf", "108.pdf"],
    "courseFinalExam": []
}]
                let url = location.href;
                let get = "";
                if (url.includes('?')){
                    get = (url.split("?")[1]).split("=")[1];
                }
                let key;
                for (let i in obj){
                    if(obj[i].courseNum == get){
                        key = obj[i];
                    }
                }
                let libraryMiddleUrl = [];
                if (key.courseMiddleExam.length != 0){
                    let fileMiddleUrl = [];
                    fileMiddleUrl.push("../library/" + key.courseNum + "/" + "m/" + key.courseMiddleExam[0])
                    let index1 = 0;
                    for (let i = 0; i < key.courseMiddleExam.length - 1; i++){
                        if (key.courseMiddleExam[index1].split("_")[0].split(".")[0] == key.courseMiddleExam[i + 1].split("_")[0].split(".")[0]){
                            fileMiddleUrl.push("../library/" + key.courseNum + "/" + "m/" + key.courseMiddleExam[i + 1]);
                        }
                        else{
                            index1 = i + 1;
                            let temp = {
                                "fileYear": key.courseMiddleExam[i].split("_")[0].split(".")[0],
                                "fileMiddleUrl": fileMiddleUrl
                            }
                            libraryMiddleUrl.push(temp);
                            fileMiddleUrl = ["../library/" + key.courseNum + "/" + "m/" + key.courseMiddleExam[index1]]
                        }
                    }
                    let temp1 = {
                        "fileYear": key.courseMiddleExam[index1].split("_")[0].split(".")[0],
                        "fileMiddleUrl": fileMiddleUrl
                        }
                    libraryMiddleUrl.push(temp1);
                }
                let libraryFinalUrl = [];
                if(key.courseFinalExam.length != 0){
                    let fileFinalUrl = [];

                    fileFinalUrl.push("../library/" + key.courseNum + "/" + "f/" + key.courseFinalExam[0])
                    let index2 = 0;
                    for (let i = 0; i < key.courseFinalExam.length - 1; i++){
                        if (key.courseFinalExam[index2].split("_")[0].split(".")[0] == key.courseFinalExam[i + 1].split("_")[0].split(".")[0]){
                            fileFinalUrl.push("../library/" + key.courseNum + "/" + "f/" + key.courseFinalExam[i + 1]);
                        }
                        else{
                            index2 = i + 1;
                            let temp = {
                                "fileYear": key.courseFinalExam[i].split("_")[0].split(".")[0],
                                "fileFinalUrl": fileFinalUrl
                            }
                            libraryFinalUrl.push(temp);
                            fileFinalUrl = ["../library/" + key.courseNum + "/" + "f/" + key.courseFinalExam[index2]]
                        }
                    }
                    let temp2 = {
                        "fileYear": key.courseFinalExam[index2].split("_")[0].split(".")[0],
                        "fileFinalUrl": fileFinalUrl
                        }
                    libraryFinalUrl.push(temp2);
                }
                

                return{
                    keyword: key,
                    libraryMiddleUrl: libraryMiddleUrl,
                    libraryFinalUrl: libraryFinalUrl
                }
            }
        }).mount("#app");
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, setPersistence, browserSessionPersistence, signOut }
            from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"

        const firebaseConfig = {
            apiKey: "AIzaSyDire1Trk6iWcIM8hADzsDyQuSeM4Wyphs",
            authDomain: "ilt-history-exam.firebaseapp.com",
            databaseURL: "https://ilt-history-exam-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "ilt-history-exam",
            storageBucket: "ilt-history-exam.appspot.com",
            messagingSenderId: "864725739716",
            appId: "1:864725739716:web:43bd544e81d6e30ac60191"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        onAuthStateChanged(auth, (user)=>{
            let topBar = document.getElementById('top-bar');
            var span = document.createElement('span');
            var a1 = document.createElement('a');
            a1.setAttribute('class', 'top-bar-item');
            a1.setAttribute('href', '../index.html');
            a1.innerHTML = '首頁';

            var a5 = document.createElement('a');
            a5.setAttribute('class', 'top-bar-item');
            a5.setAttribute('href', './searchPage.html?test=0');
            a5.innerHTML = '課程';

            var a2 = document.createElement('a');
            a2.setAttribute('class', 'top-bar-item');
            a2.setAttribute('href', 'https://script.google.com/a/macros/gm2.nutn.edu.tw/s/AKfycbxc8ovKaHw0vnhaHUU-LLUqwEarEzqYUi7AEfmFDUOjgkmyHe52pGDU2UttYNfrCP2F/exec');
            a2.setAttribute('target', '_blank');
            a2.innerHTML = '上傳';
            if (user){
                // var a3 = document.createElement('a');
                // a3.setAttribute('class', 'top-bar-item');
                // a3.setAttribute('href', './collectPage.html')
                // a3.innerHTML = '收藏';
                var a4 = document.createElement('a');
                a4.setAttribute('class', 'top-bar-item');
                a4.innerHTML = '登出';
                a4.addEventListener('click', signout);
                span.appendChild(a1);
                span.appendChild(a5);
                span.appendChild(a2);
                // span.appendChild(a3);
                span.appendChild(a4);
            }
            else{
                var a3 = document.createElement('a');
                a3.setAttribute('class', 'top-bar-item');
                a3.setAttribute('href', './loginPage.html');
                a3.innerHTML = '登入';
                span.appendChild(a1);
                span.appendChild(a5);
                span.appendChild(a2);
                span.appendChild(a3);
            }
            topBar.appendChild(span);
        })
        function signout(){
            signOut(auth)
            .then(()=>{
                window.location.href = '../index.html';
            })
            .catch((error)=>{
                console.log(error.message);
            })
        }
    </script>
</body>

</html>